<% provide(:title, "Locations") %>

<h1>Locations</h1>

<% @locations.each do |location| %>
  Name: <%= location.name %>, latitude: <%= location.latitude %>, longitude: <%= location.longitude %><br>
<% end %>

<div id="map"></div>
<script>
  // var map;
  // function initMap() {
  //   map = new google.maps.Map(document.getElementById('map'), {
  //     center: {lat: -34.397, lng: 150.644},
  //     zoom: 8
  //   });
  // }

function initMap() {
  
  // if (navigator.geolocation) {
  //   navigator.geolocation.getCurrentPosition(function(position) {
  //     var pos = {
  //       lat: position.coords.latitude,
  //       lng: position.coords.longitude
  //     }
  //   }
  // }
  var pos = {lat: -37.8098, lng: 144.9652};
  var map = new google.maps.Map(
      document.getElementById('map'), {zoom: 13, center: pos});  
  var marker = new google.maps.Marker({position: pos, map: map});

  // map = new google.maps.Map(document.getElementById('map'), {
  //   center: {lat: -34.397, lng: 150.644},
  //   zoom: 13
  // });  
}
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAmMsed0zPFAgZoiy8oORF6kZTurpIrdg0&callback=initMap">
</script>
